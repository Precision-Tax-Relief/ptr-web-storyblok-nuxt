<script setup lang="ts">
interface PropTypes {
  blok: PtrDiscoverWhyStoryblok
}

const props = defineProps<PropTypes>()
const isGoogleModalOpen = ref(false)

const openGoogleModal = () => {
  isGoogleModalOpen.value = true
}

const closeGoogleModal = () => {
  isGoogleModalOpen.value = false
}
</script>

<template>
  <div v-editable="props.blok" class="bg-slate-100 py-20 md:py-28">
    <div class="container px-0 sm:px-4">
      <div class="mx-auto max-w-3xl">
        <h2
          class="mx-auto mb-10 max-w-5xl text-center text-xl font-bold leading-tight text-primary sm:text-4xl md:text-4xl"
        >
          Discover Why Precision Tax Earns Top BBB Endorsement
        </h2>
      </div>
      <ul class="my-8 flex flex-row flex-wrap items-center justify-center gap-x-20 gap-y-10 md:mx-auto">
        <li>
          <div>
            <NuxtPicture
              width="140"
              :src="blok.googleImg?.filename"
              :alt="blok.googleImg?.alt ?? undefined"
              loading="lazy"
              sizes="140px"
            />
            <div class="mt-2 text-center">
              <!-- TODO fix broken link -->
              <a
                id="open-google-modal"
                href="javascript:void(0);"
                @click="openGoogleModal"
                data-click-name="ClickG2 - Google Modal"
                class="border-b border-stone-400 text-lg font-light text-stone-400 hover:border-b-2"
                >See all 261 Reviews</a
              >
            </div>
            <div
              v-if="isGoogleModalOpen"
              id="google-modal"
              class="modal fixed bottom-0 left-0 right-0 top-0 z-[200] flex overflow-hidden bg-[#000] bg-opacity-75 text-center"
              @click="closeGoogleModal"
            >
              <div
                class="modal-inner pt-15 relative m-auto inline-block h-[450px] w-[320px] overflow-x-hidden overflow-y-scroll bg-white align-middle md:pt-0 lg:h-[500px] lg:w-[650px] lg:pl-10"
                @click.stop
              >
                <a
                  id="google-modal-close"
                  @click="closeGoogleModal"
                  class="absolute right-0 top-0 cursor-pointer bg-white p-5 text-4xl font-bold shadow-md"
                >
                  Ã—
                </a>
                <div
                  class="modal-content overflow-scroll text-left text-xl leading-[19px] xl:text-2xl"
                  id="modal-google"
                >
                  <div id="google-reviews">
                    <iframe
                      style="width: 1px; min-width: 100%; height: 4854px; border: none; overflow: hidden"
                      scrolling="no"
                      title="Reviews"
                      src="https://reviewsonmywebsite.com/embed/v2/Rs2PIdoOtwhniJ41516eQgEUrOjaGPQTCDSLMv7h3dgbNvbMCx"
                    ></iframe>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="flex flex-col items-center">
            <svg class="mx-auto w-40" viewBox="0 0 1785 448">
              <path
                d="M469.158 162.792h180.076v33.524h-70.9v188.98h-38.865v-188.98h-70.608l.297-33.524zm172.366 61.41h33.23v31.152h.59c1.19-4.45 3.27-8.604 6.23-12.757 2.97-4.154 6.53-8.01 10.98-11.274 4.15-3.56 8.9-6.23 14.24-8.307 5.04-2.076 10.38-3.263 15.72-3.263 4.16 0 7.12.297 8.61.297 1.48.296 3.26.593 4.74.593v34.117c-2.37-.593-5.04-.89-7.71-1.186-2.67-.297-5.04-.594-7.71-.594-5.94 0-11.57 1.187-16.91 3.56-5.34 2.374-9.8 5.934-13.95 10.384-3.86 4.747-7.12 10.383-9.49 17.207-2.38 6.823-3.56 14.834-3.56 23.734v76.542h-35.602l.592-160.204zm257.81 161.095h-35.3v-22.548h-.6c-4.45 8.307-10.97 14.537-19.58 19.58-8.6 5.044-17.5 7.418-26.4 7.418-21.07 0-36.49-5.044-45.99-15.724-9.49-10.384-14.24-26.404-14.24-47.468V224.203h35.6v98.792c0 14.24 2.67 24.327 8.31 29.964 5.34 5.934 13.06 8.9 22.84 8.9 7.42 0 13.65-1.186 18.7-3.56 5.04-2.373 9.19-5.34 12.16-9.197 3.26-3.856 5.34-8.603 6.82-13.943 1.49-5.34 2.08-11.274 2.08-17.504v-93.452h35.6v161.094zm60.23-51.622c1.18 10.384 5.04 17.504 11.86 21.954 6.82 4.154 15.13 6.23 24.63 6.23 3.26 0 7.12-.296 11.27-.89 4.15-.593 8.31-1.483 11.87-2.966 3.85-1.484 6.82-3.56 9.19-6.527 2.38-2.967 3.56-6.527 3.27-10.977-.3-4.45-1.78-8.307-5.05-11.274-3.26-2.966-7.12-5.043-11.86-7.12-4.75-1.78-10.39-3.263-16.62-4.45-6.23-1.187-12.46-2.67-18.98-4.153-6.53-1.484-13.06-3.264-19.29-5.34-6.23-2.077-11.57-4.747-16.61-8.604-4.75-3.56-8.9-8.01-11.57-13.647-2.97-5.637-4.45-12.164-4.45-20.47 0-8.901 2.07-16.021 6.52-21.954 4.16-5.934 9.79-10.681 16.32-14.241 6.53-3.56 13.94-6.23 21.95-7.713a125.793 125.793 0 0122.85-2.077c8.31 0 16.32.89 23.73 2.67 7.42 1.78 14.54 4.45 20.47 8.604 6.23 3.857 11.28 9.197 15.13 15.427 4.16 6.23 6.53 13.943 7.72 22.844h-37.09c-1.78-8.604-5.63-14.241-11.57-17.207-6.23-2.967-13.05-4.451-21.06-4.451-2.37 0-5.64.297-8.9.594-3.56.593-6.53 1.187-9.79 2.373-2.97 1.187-5.64 2.967-7.72 5.044-2.07 2.076-3.26 5.043-3.26 8.603 0 4.45 1.48 7.714 4.45 10.384s6.83 4.747 11.87 6.823c4.75 1.78 10.38 3.264 16.61 4.45 6.23 1.187 12.76 2.67 19.29 4.154 6.52 1.483 12.75 3.263 18.98 5.34s11.87 4.747 16.62 8.603c4.74 3.56 8.9 8.01 11.86 13.35 2.97 5.34 4.45 12.164 4.45 19.878 0 9.493-2.07 17.504-6.52 24.327-4.45 6.527-10.09 12.164-16.91 16.317-6.83 4.154-14.84 7.12-23.14 9.197-8.61 1.78-16.91 2.967-25.22 2.967-10.09 0-19.58-1.187-28.18-3.56-8.61-2.374-16.32-5.934-22.55-10.384-6.23-4.747-11.28-10.383-14.84-17.504-3.56-6.823-5.63-15.13-5.93-24.92h35.9v.296h.3zm117.18-109.472h27v-48.654h35.6v48.357h32.04v26.404h-32.04v86.036c0 3.856.3 6.823.59 9.79.3 2.67 1.19 5.043 2.08 6.823 1.19 1.78 2.97 3.264 5.04 4.154 2.38.89 5.34 1.483 9.5 1.483 2.37 0 5.04 0 7.41-.297 2.38-.296 5.05-.593 7.42-1.186v27.59c-3.86.594-7.71.89-11.57 1.187-3.86.593-7.42.593-11.57.593-9.49 0-16.91-.89-22.55-2.67-5.63-1.78-10.08-4.45-13.35-7.713-3.26-3.56-5.34-7.714-6.52-12.757-1.19-5.044-1.79-11.274-2.08-17.801v-94.935h-27V223.61v.593zm119.56 0h33.52v21.954h.6c5.04-9.494 11.87-16.021 20.77-20.174 8.9-4.153 18.39-6.23 29.07-6.23 12.76 0 23.73 2.077 33.23 6.823 9.49 4.45 17.2 10.384 23.43 18.394 6.23 7.714 10.98 16.91 13.95 27.294 2.96 10.384 4.74 21.657 4.74 33.227 0 10.977-1.48 21.36-4.15 31.448-2.97 10.087-7.12 19.284-12.76 26.997-5.63 7.714-12.75 13.944-21.65 18.69-8.9 4.747-18.99 7.12-30.86 7.12-5.04 0-10.38-.593-15.43-1.483-5.04-.89-10.08-2.373-14.83-4.45-4.74-2.076-9.2-4.747-13.05-8.01-4.16-3.263-7.42-7.12-10.09-11.274h-.59v80.399h-35.6V224.203h-.3zm124.31 80.695c0-7.12-.89-14.24-2.97-21.064-1.78-6.823-4.75-12.757-8.6-18.097-3.86-5.34-8.61-9.493-13.95-12.757-5.63-3.263-12.16-4.747-19.28-4.747-14.84 0-26.11 5.044-33.82 15.428-7.42 10.383-11.28 24.327-11.28 41.534 0 8.307.89 15.723 2.97 22.547 2.08 6.823 4.75 12.757 8.9 17.8 3.86 5.044 8.61 8.9 14.24 11.867 5.64 2.967 11.87 4.45 19.29 4.45 8.3 0 14.83-1.78 20.47-5.043 5.63-3.263 10.08-7.714 13.94-12.757 3.56-5.34 6.23-11.274 7.71-18.097 1.49-7.12 2.38-13.944 2.38-21.064zm62.59-142.106h35.61v33.524h-35.61v-33.524zm0 61.41h35.61v161.095h-35.61V224.203zm67.35-61.41h35.6v222.505h-35.6V162.792zm144.18 226.955c-12.75 0-24.32-2.077-34.41-6.527-10.09-4.45-18.39-10.087-25.51-17.504-6.83-7.417-12.17-16.614-15.73-26.997-3.56-10.384-5.64-21.954-5.64-34.118 0-12.163 1.78-23.437 5.64-33.82 3.56-10.384 8.9-19.284 15.73-26.998 6.82-7.416 15.42-13.35 25.51-17.503 10.09-4.154 21.66-6.527 34.41-6.527 12.76 0 24.33 2.077 34.42 6.527 10.08 4.153 18.39 10.087 25.51 17.503 6.82 7.417 12.16 16.614 15.72 26.998a103.653 103.653 0 015.64 33.82c0 12.46-1.78 23.734-5.64 34.118-3.85 10.383-8.9 19.284-15.72 26.997-6.82 7.417-15.43 13.35-25.51 17.504-10.09 4.153-21.36 6.527-34.42 6.527zm0-28.184c7.72 0 14.84-1.78 20.47-5.044 5.94-3.263 10.39-7.713 14.24-13.053 3.86-5.34 6.53-11.571 8.31-18.097a81.38 81.38 0 002.67-20.768c0-6.823-.89-13.647-2.67-20.47-1.78-6.824-4.45-12.757-8.31-18.097-3.85-5.34-8.6-9.494-14.24-12.757-5.93-3.263-12.75-5.044-20.47-5.044-7.71 0-14.83 1.78-20.47 5.044-5.93 3.263-10.38 7.713-14.24 12.757-3.85 5.34-6.53 11.273-8.31 18.097-1.77 6.823-2.66 13.647-2.66 20.47 0 7.12.89 13.944 2.66 20.768 1.78 6.823 4.46 12.757 8.31 18.097 3.86 5.34 8.61 9.79 14.24 13.053 5.94 3.56 12.76 5.044 20.47 5.044zm91.97-137.36h27v-48.654h35.6v48.357h32.04v26.404h-32.04v86.036c0 3.856.3 6.823.59 9.79.3 2.67 1.19 5.043 2.08 6.823 1.19 1.78 2.97 3.264 5.04 4.154 2.38.89 5.34 1.483 9.5 1.483 2.37 0 5.04 0 7.41-.297 2.38-.296 5.05-.593 7.42-1.186v27.59c-3.86.594-7.71.89-11.57 1.187-3.86.593-7.42.593-11.57.593-9.49 0-16.91-.89-22.55-2.67-5.63-1.78-10.08-4.45-13.35-7.713-3.26-3.56-5.34-7.714-6.52-12.757-1.19-5.044-1.78-11.274-2.08-17.801v-94.935h-27V223.61v.593z"
                fill-rule="nonzero"
              />
              <path fill="none" d="M-.003 0h1784.795v447.53H-.003z" />
              <path
                d="M427.62 162.792H264.747L214.609 7.928l-50.435 154.864L1.3 162.495l131.723 95.825-50.435 154.864 131.723-95.826 131.723 95.826-50.138-154.864 131.723-95.528z"
                fill="#00b67a"
                fill-rule="nonzero"
              />
              <path d="M307.17 293.328l-11.273-35.008-81.288 59.038 92.562-24.03z" fill="#005128" fill-rule="nonzero" />
            </svg>
            <div class="flex flex-col items-center gap-3">
              <SegmentExternalLink
                to="https://www.trustpilot.com/review/www.precisiontaxrelief.com?utm_medium=Trustbox&amp;utm_source=EmailSignature3"
                label="Trustpilot Reviews"
              >
                <img
                  width="140"
                  src="https://emailsignature.trustpilot.com/signature/en-US/3/51eca7db00006400055e8023/stars.png"
                  alt="Trustpilot Stars"
                  loading="lazy"
                />
                <img
                  width="140"
                  src="https://emailsignature.trustpilot.com/newsletter/en-US/2/51eca7db00006400055e8023/text@2x.png"
                  alt="TrustScore"
                  loading="lazy"
                />
              </SegmentExternalLink>
            </div>
          </div>
        </li>
        <li class="mx-auto lg:mx-0">
          <div>
            <svg class="mx-auto w-40" viewBox="0 0 574.04 89.64">
              <path fill="#323a56" d="M33.6 24.8l6.33 4-2.42 22.87L71.57 30.9a36 36 0 10-70.5 13.77z" />
              <path fill="#323a56" d="M34.64 63.21l-6.33-4 2.42-22.86L4.09 52.61a36 36 0 0067.53-12z" />
              <circle fill="#f64e00" cx="37.81" cy="16.42" r="5.09" />
              <path
                fill="#201d1e"
                d="M89.9 69l8.94-.13V5.69l-8.94.13V69zm42.76-43.9c-4 0-10.81 1.78-13.83 6.61V26h-8.44v43h8.44V45.73c0-8.48 6.4-12.28 12.74-12.28 6 0 10 4.5 10 11.19V69H150V44.19c0-6.11-1.68-11.11-5-14.45-3-3.04-7.27-4.64-12.34-4.64zm42.72 32.84l-12.91-31.93h-9.03L171.3 69h8.08l17.95-42.99h-9.12l-12.83 31.93zM332.89 25.1c-13 0-22.45 9.36-22.45 22.27s9.66 22.54 22.45 22.54a22 22 0 0022.55-22.54c0-12.91-9.44-22.27-22.55-22.27zm0 36.83C325 61.93 319 55.67 319 47.37c0-8.15 6-14.29 13.92-14.29A13.89 13.89 0 01347 47.37c0 8.3-6.07 14.56-14.11 14.56zm51.69-36.83c-6.23 0-11.93 2.71-14.83 7V26h-8.44v63.64h8.44V63c2.88 4.33 8.37 6.88 14.92 6.88 12.43 0 21.45-9.4 21.45-22.36s-9.06-22.42-21.54-22.42zm-.73 36.83a14.06 14.06 0 01-14.1-14.29c0-8.3 6.06-14.56 14.1-14.56 7.71 0 13.74 6.4 13.74 14.56s-5.91 14.29-13.74 14.29zM494.15 32c-2.88-4.33-8.37-6.88-14.92-6.88-12.43 0-21.45 9.4-21.45 22.36s9.06 22.45 21.54 22.45c6.23 0 11.93-2.71 14.83-7V69h8.44V2.82h-8.44zM480 61.93c-7.66 0-13.65-6.4-13.65-14.56s5.83-14.29 13.65-14.29a14.1 14.1 0 0114.19 14.29c-.04 7.06-5.01 14.56-14.19 14.56zm33.27-35.92h8.44V69h-8.44zm60.06-.01h-8.44v5c-3-3.74-8.17-5.92-14.21-5.92H550c-12.43 0-21.45 9.4-21.45 22.36s9.06 22.45 21.54 22.45h.71c5.75 0 11.06-2.32 14.12-6V69H574V26zm-22.27 35.9c-7.49-.2-13.3-6.5-13.3-14.54s5.7-14.09 13.3-14.27a14.08 14.08 0 0113.83 14.27c0 6.97-4.89 14.35-13.83 14.55zM262.32 42.72c-4.41-1.13-7.53-2.14-7.53-4.89 0-3.09 3.12-5.25 7.6-5.25a14.82 14.82 0 018.93 3.22l.21.16 4.53-6.28-.2-.16a21.88 21.88 0 00-14-4.61c-7.61 0-15.8 4.19-15.8 13.37 0 6.4 5.34 9.52 9.81 11 1.5.5 3 .89 4.52 1.27 4.67 1.2 8.71 2.24 8.71 5.88 0 2.55-2.57 5.25-7.33 5.25a20.55 20.55 0 01-12.36-4.57l-.22-.16-4.52 6.46.19.15a26.74 26.74 0 0017.1 5.79c7.7 0 15.89-4.59 15.89-13.1S270 44.69 262.32 42.72zm189.97 4.05C452.29 33.94 444 25 432 25c-12.13 0-20.93 9.17-20.93 21.79a22.64 22.64 0 006.41 16.4 20 20 0 0014.13 5.67h.4c7.43-.13 12.28-1.36 18.17-7.72l.18-.19-5.85-5.57-.18.2A15.42 15.42 0 01432.3 61c-6.52 0-11.66-4.78-12.87-11.93L452 49h.24v-.24a7.17 7.17 0 000-1.17c.06-.16.05-.38.05-.82zm-31.57-4.34c1.11-6.21 5.18-9.63 11.49-9.63 6.11 0 10.27 3.59 11.19 9.63zM240 46.77C240 33.94 231.65 25 219.73 25c-12.13 0-20.93 9.17-20.93 21.79a22.64 22.64 0 006.41 16.4 20 20 0 0014.13 5.67h.39c7.44-.13 12.29-1.36 18.18-7.72l.18-.19-5.85-5.57-.18.2A15.42 15.42 0 01220 61c-6.53 0-11.66-4.78-12.87-11.93l32.56-.07h.25v-.24a8.65 8.65 0 000-1.17c.06-.16.06-.38.06-.82zm-31.6-4.34c1.12-6.21 5.19-9.63 11.5-9.63 6.11 0 10.27 3.59 11.19 9.63zm97.1 17.64a12.75 12.75 0 01-3.56.43 7 7 0 01-5.23-2c-.92-1.08-1.11-2.74-1.11-4.89V33.35h12V26h-12V12.08h-8.45V26h-4.64v7.35h4.64v19.82c0 4.77 1.06 8.28 3.24 10.72a14.46 14.46 0 0011.31 4.74 21.82 21.82 0 006.27-.86l.25-.08-2.47-7.69zM517.49 5.41a5.39 5.39 0 00-5.4 5.49 5.32 5.32 0 005.4 5.4 5.39 5.39 0 005.51-5.4 5.47 5.47 0 00-5.51-5.49z"
              />
            </svg>
            <div class="text-center">
              <SegmentExternalLink
                to="https://www.trustpilot.com/review/www.precisiontaxrelief.com?utm_medium=Trustbox&amp;utm_source=EmailSignature3"
                label="Investopedia"
                class="border-b border-stone-400 text-sm text-stone-500 hover:border-b-2"
                >Ranked #1 Overall<br />Best Tax Relief Company
              </SegmentExternalLink>
            </div>
          </div>
        </li>
      </ul>

      <div class="my-20">
        <h3 class="mb-8 px-4 text-center text-4xl font-bold text-primary">Featured client stories</h3>
        <StoryblokComponent v-for="child_block in blok.slider" :key="child_block._uid" :blok="child_block" />
      </div>

      <PTRChoiceTable />

      <PTRClientResults :bloks="blok.resultSlides" />

      <PTRCallConsultationButton />
    </div>
  </div>
</template>
